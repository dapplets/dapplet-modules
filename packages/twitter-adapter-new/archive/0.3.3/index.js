!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var s in r)("object"==typeof exports?exports:e)[s]=r[s]}}(this,(function(){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";var s=this&&this.__decorate||function(e,t,r,s){var n,o=arguments.length,i=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(o<3?n(i):o>3?n(t,r,i):n(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),o=r(2),i=r(3);let c=class extends n.DynamicAdapter{constructor(){super(...arguments),this.config=[{containerSelector:"main[role=main]",contextSelector:"article",insPoints:{TWEET_SOUTH:{selector:"div[role=group]"},TWEET_COMBO:{selector:""},PICTURE:{selector:"div[lang]"}},contextBuilder:e=>{var t,r,s,n;return{id:e.querySelector("a time").parentNode.href.split("/").pop(),text:null===(t=e.querySelector("div[lang]"))||void 0===t?void 0:t.innerText,authorFullname:null===(r=e.querySelector("a:nth-child(1) div span span"))||void 0===r?void 0:r.innerText,authorUsername:null===(s=e.querySelector("div.r-1f6r7vd > div > span"))||void 0===s?void 0:s.innerText,authorImg:null===(n=e.querySelector("img.css-9pa8cd"))||void 0===n?void 0:n.getAttribute("src")}}}],this.widgets={button:this.createWidgetFactory(o.Button),picture:this.createWidgetFactory(i.Picture)}}};c=s([Injectable],c),t.default=c},function(e,t,r){e.exports=function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";var s=this&&this.__decorate||function(e,t,r,s){var n,o=arguments.length,i=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(o<3?n(i):o>3?n(t,r,i):n(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=r(1),i=r(2);let c=class{constructor(){if(this.observer=null,this.features=[],this.contextBuilders=[],!this.observer){if(!document||!window||!MutationObserver)throw Error("Document or MutationObserver is not available.");this.observer=new MutationObserver(e=>this.updateObservers(e)),this.observer.observe(document.body,{childList:!0,subtree:!0})}}attachFeature(e){this.features.find(t=>t===e)||(this.features.splice(e.orderIndex,0,e),this.updateObservers())}detachFeature(e){this.features=this.features.filter(t=>t!==e),this.contextBuilders.forEach(t=>{const r=t.widgets.get(e);r&&r.forEach(e=>e.unmount())})}attachConfig(e){const t=e.map(e=>new o.WidgetBuilder(e));this.contextBuilders.push(...t)}updateObservers(e){this.contextBuilders.forEach(t=>{var r;const s=document.querySelector(t.containerSelector);if(s){const n=[];null===(r=e)||void 0===r||r.forEach(e=>Array.from(e.removedNodes).filter(e=>e.nodeType==Node.ELEMENT_NODE).forEach(e=>{var r;const s=Array.from((null===(r=e)||void 0===r?void 0:r.querySelectorAll(t.contextSelector))||[]).map(e=>t.contexts.get(e)).filter(e=>e);n.push(...s)})),n&&n.length>0&&(n.forEach(e=>e.features.forEach(e=>e.subscriptions.forEach(e=>e.close()))),Core.contextFinished(n.map(e=>e.parsed))),t.updateContexts(this.features,s)}s&&!t.observer?(t.observer=new MutationObserver(e=>{t.updateContexts(this.features,s,e)}),t.observer.observe(s,{childList:!0,subtree:!0})):!s&&t.observer&&(t.observer.disconnect(),t.observer=null)})}createWidgetFactory(e){return t=>{const r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));return(s,n,o,c,a)=>(function(e,t,r,s,n,o,c,a){const l=t.insPoints[r],u=o.querySelector(l.selector);if(u.getElementsByClassName(c).length>0)return;const d=t.contexts.get(o),f=new i.State(e=>s(d.parsed,e,a),c),h=new e;h.state=f.state,f.changedHandler=()=>h.mount(),h.mount(),h.el.classList.add("dapplet-widget");const p=u.getElementsByClassName("dapplet-widget");return p.length>=n?u.insertBefore(h.el,p[n]):u.appendChild(h.el),h})(e,s,n,t,o,c,r,a)}}};c=s([Injectable,n("design:paramtypes",[])],c),t.DynamicAdapter=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetBuilder=class{constructor(e){return this.observer=null,this.widgets=new Map,this.contexts=new WeakMap,Object.assign(this,e)}updateContexts(e,t,r){var s;const n=Array.from((null===(s=t)||void 0===s?void 0:s.querySelectorAll(this.contextSelector))||[]);if(0===n.length)return;const o=[];for(const t of n){const r=!this.contexts.has(t),s=r?{parsed:this.contextBuilder(t),features:new Map}:this.contexts.get(t);r&&o.push(s.parsed);for(let t=0;t<e.length;t++){const r=e[t];if(!s.features.get(r)){const e={proxiedSubs:{},subscriptions:[]},{connections:t}=r.config;for(const r in t){const n={};e.proxiedSubs[r]=new Proxy({},{get:(e,t,r)=>({datasource:e=>{n[t]||(n[t]=[]),n[t].push(e)}})});const o=t[r].subscribe(s.parsed.id,e=>{for(const t in n)(n[t]||[]).forEach(r=>r(e[t]))});e.subscriptions.push(o)}s.features.set(r,e)}}r&&this.contexts.set(t,s);for(let r=0;r<e.length;r++){const n=e[r];for(const e in this.insPoints)for(const o of n.config[e]||[]){const i=n.contextIds||[];if(0===i.length||-1!==i.indexOf(s.parsed.id)){const i=o(this,e,r,t,s.features.get(n).proxiedSubs);if(!i)continue;const c=this.widgets.get(n)||[];c.push(i),this.widgets.set(n,c)}}}}o.length>0&&Core.contextStarted(o)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=class{constructor(e,t){this.stateTemplates=e(e=>this.setState(e));for(const e in this.stateTemplates)this.stateTemplates[e].clazz=t;this.setState("DEFAULT")}createState(e){const t=this,r=new Proxy(e,{get:(e,t,r)=>"object"==typeof e[t]&&e[t].datasource?void 0:Reflect.get(e,t,r),set(e,r,s,n){const o=Reflect.set(e,r,s,n);return o&&t.changedHandler&&t.changedHandler(),o}});for(const t in e){const s=e[t];"object"==typeof s&&s.datasource&&s.datasource(e=>{r[t]=e.toString()})}return r}setState(e){const t=this.stateTemplates[e];this.state=this.createState(t),this.changedHandler&&this.changedHandler()}}}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Button=class{mount(){this.el||this._createElement();const{img:e,label:t,loading:r,disabled:s}=this.state,n=`<div role="button" data-focusable="true" tabindex="0" class="css-18t94o4 css-1dbjc4n r-1777fci r-11cpok1 r-bztko3 r-lrvibr">\n                <div dir="ltr" class="css-901oao r-1awozwy r-1re7ezh r-6koalj r-1qd0xha r-a023e6 r-16dba41 r-1h0z5md r-ad9z0x r-bcqeeo r-o7ynqc r-clp7b1 r-3s2u2q r-qvutc0">\n                    <div class="css-1dbjc4n r-xoduu5">\n                        ${r?'<svg width="18px" height="18px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-rolling" style="background: none;">\n                            <circle cx="50" cy="50" fill="none" stroke="#1da1f2" stroke-width="14" r="40" stroke-dasharray="188.49555921538757 64.83185307179586" transform="rotate(77.5793 50 50)">\n                                <animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform>\n                            </circle>\n                        </svg>':`<img height="18" src="${e}" class="r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-bnwqim r-1plcrui r-lrvibr">`}\n                        <div class="css-1dbjc4n r-sdzlij r-1p0dtai r-xoduu5 r-1d2f490 r-xf4iuw r-u8s1d r-zchlnj r-ipm5af r-o7ynqc r-6416eg"></div>\n                    </div>\n                    ${t?`<div class="css-1dbjc4n r-xoduu5 r-1udh08x">\n                        <span dir="auto" class="css-901oao css-16my406 r-1qd0xha r-ad9z0x r-1n0xq6e r-bcqeeo r-d3hbe1 r-1wgg2b2 r-axxi2z r-qvutc0">\n                            <span dir="auto" ${s?'style="color:#aaa;"':""} class="css-901oao css-16my406 r-1qd0xha r-ad9z0x r-bcqeeo r-qvutc0">${t}</span>\n                        </span>\n                    </div>`:""}\n                </div>\n            </div>`;this.el.innerHTML=n}unmount(){this.el&&this.el.remove()}_createElement(){var e,t;this.el=document.createElement("div"),this.el.classList.add(this.state.clazz,"css-1dbjc4n","r-1iusvr4","r-18u37iz","r-16y2uox","r-1h0z5md"),this.el.addEventListener("click",e=>{var t,r;this.state.disabled||null===(r=(t=this.state).exec)||void 0===r||r.call(t)}),this.mount(),null===(t=(e=this.state).init)||void 0===t||t.call(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Picture=class{mount(){this.el||this._createElement();const{img:e,disabled:t}=this.state,r=`<img src="${e}" />`;this.el.innerHTML=r}unmount(){this.el&&this.el.remove()}_createElement(){var e,t;this.el=document.createElement("div"),this.el.classList.add(this.state.clazz),this.el.addEventListener("click",e=>{var t,r;this.state.disabled||null===(r=(t=this.state).exec)||void 0===r||r.call(t)}),this.el.style.position="absolute",this.el.style.bottom="15px",this.el.style.right="15px",this.el.style.zIndex="3",this.mount(),null===(t=(e=this.state).init)||void 0===t||t.call(e)}}}])}));